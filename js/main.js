(function(){var i,n,t;n=function(){function i(i){this.$rootEl=i,this.render(),this.ui(),this.bind()}return i.prototype.render=function(){return this.$rootEl.append("<section id='dash' style='display:none;'>\n  <p><span id='dash_email'></span> — <a id='dash_logout_btn' href='#'>logout</a></p>\n</section>")},i.prototype.ui=function(){return this.$el=$("#dash"),this.$email=$("#dash_email"),this.$logoutBtn=$("#dash_logout_btn")},i.prototype.open=function(){return this.$el.show()},i.prototype.close=function(){return this.$el.hide()},i.prototype.bind=function(){return this.$logoutBtn.on("click",function(i){return app.authView.logout(),!1})},i.prototype.setUser=function(i){return this.user=i,this.$email.html(this.user.email)},i}(),t=function(){function i(i,n,t){this.$rootEl=i,this.firebase=n,this.onAuthCb=t,this.render(),this.ui(),this.bind(),this.authenticate()}return i.prototype.render=function(){return this.$rootEl.append("<section id='auth' style='display:none;'>\n  <p>Welcome to <strong>RSS.rocks</strong>!</p>\n\n  <div id='signup' style='display:none;'>\n    <form id='signup_form'>\n      <input id='signup_email' value='' placeholder='email' type='email'>\n      <input id='signup_password' value='' placeholder='password' type='password'>\n      <input id='signup_submit' value='signup' type='submit'>\n      <span id='signup_loading' style='display:none;'>please wait...</span>\n    </form>\n    <p id='signup_error' class='error'></p>\n    <p>— if you have an account, please <a id='signup_login_btn' href='#'>login</a></p>\n  </div>\n\n  <div id='login'>\n    <form id='login_form'>\n      <input id='login_email' value='' placeholder='email' type='email'>\n      <input id='login_password' value='' placeholder='password' type='password'>\n      <input id='login_submit' value='login' type='submit'>\n      <span id='login_loading' style='display:none;'>please wait...</span>\n    </form>\n    <p id='login_error' class='error'></p>\n    <p>— if you don't have an account, please <a id='login_signup_btn' href='#'>signup</a><br>\n    — if you forgot your password, <a id='login_reset_password' href='#'>reset</a> it via an email</p>\n  </div>\n</section>")},i.prototype.ui=function(){return this.$el=$("#auth"),this.$loginBtn=$("#signup_login_btn"),this.$signupBtn=$("#login_signup_btn"),this.$loginView=$("#login"),this.$signupView=$("#signup"),this.$loginForm=$("#login_form"),this.$signupForm=$("#signup_form"),this.$loginEmail=$("#login_email"),this.$loginPass=$("#login_password"),this.$signupEmail=$("#signup_email"),this.$signupPass=$("#signup_password"),this.$loginError=$("#login_error"),this.$signupError=$("#signup_error"),this.$signupLoading=$("#signup_loading"),this.$loginLoading=$("#login_loading")},i.prototype.bind=function(){return this.$loginBtn.on("click",function(i){return function(n){return i.showLogin(),!1}}(this)),this.$signupBtn.on("click",function(i){return function(n){return i.showSignup(),!1}}(this)),this.$signupForm.on("submit",function(i){return function(n){return i.signup(),!1}}(this)),this.$loginForm.on("submit",function(i){return function(n){return i.login(),!1}}(this))},i.prototype.authenticate=function(){return this.auth=new FirebaseSimpleLogin(this.firebase,function(i){return function(n,t){return i.$loginLoading.hide(),t?"function"==typeof i.onAuthCb&&i.onAuthCb(t):app.show(i),n?i.error(n.message.replace("FirebaseSimpleLogin: ","")):void 0}}(this))},i.prototype.open=function(){return this.$signupError.html(""),this.$loginError.html(""),this.$el.show()},i.prototype.close=function(){return this.$el.hide()},i.prototype.showLogin=function(){return this.$loginView.show(),this.$signupView.hide(),this.$loginError.html("")},i.prototype.showSignup=function(){return this.$signupView.show(),this.$loginView.hide(),this.$signupError.html("")},i.prototype.login=function(){var i,n;return i=this.$loginEmail.val(),n=this.$loginPass.val(),this.$loginLoading.show(),this.auth.login("password",{email:i,password:n,rememberMe:!0})},i.prototype.logout=function(){return this.auth.logout(),this.showLogin(),app.show(this)},i.prototype.signup=function(){var i,n;return i=this.$signupEmail.val(),n=this.$signupPass.val(),this.$signupLoading.show(),this.auth.createUser(i,n,function(i){return function(n,t){return i.$signupLoading.hide(),n?i.error(n.message.replace("FirebaseSimpleLogin: ","")):"function"==typeof i.onAuthCb?i.onAuthCb(t):void 0}}(this))},i.prototype.error=function(i){return this.$signupError.html(i),this.$loginError.html(i)},i}(),i=function(){function i(i){this.firebaseAppName=i,this.firebase=new Firebase("https://"+this.firebaseAppName+".firebaseio.com"),this.ui(),this.render()}return i.prototype.ui=function(){return this.$el=$("#app")},i.prototype.render=function(){return this.dashView=new n(this.$el),this.authView=new t(this.$el,this.firebase,function(i){return function(n){return i.dashView.setUser(n),i.show(i.dashView)}}(this))},i.prototype.show=function(i){var n;return null!=(n=this.currentView)&&n.close(),this.currentView=i,this.currentView.open()},i}(),$(function(){var n;return n="sizzling-fire-6443",window.app=new i(n)})}).call(this);
//# sourceMappingURL=./main.map