(function(){var i,t,n,s;s=function(){function i(i,t){this.$rootEl=i,this.snapshot=t,this.render(),this.ui(),this.bind()}return i.prototype.render=function(){return this.ref=this.snapshot.ref(),this.data=this.snapshot.val(),this.$el=$("<li class='subscriptions-list-item'>\n  <a href='#' class='subscriptions-remove-button'>&times;</a> "+this.data.name+" — <a href='"+this.data.url+"' target='_blank'>"+this.data.url+"</a>\n</li>"),this.$rootEl.append(this.$el)},i.prototype.ui=function(){return this.$deleteBtn=this.$el.find(".subscriptions-remove-button")},i.prototype.bind=function(){return this.$deleteBtn.on("click",function(i){return function(t){return i.remove(),!1}}(this)),this.$deleteBtn.on("mouseenter",function(i){return $(i.currentTarget).parent().addClass("striked-out")}),this.$deleteBtn.on("mouseleave",function(i){return $(i.currentTarget).parent().removeClass("striked-out")})},i.prototype.unbind=function(){return this.$deleteBtn.off("click"),this.$deleteBtn.off("mouseenter"),this.$deleteBtn.off("mouseleave")},i.prototype.remove=function(){return confirm("Remove subscription?")?(this.unbind(),this.$el.remove(),this.ref.remove()):void 0},i}(),n=function(){function i(i,t){this.$rootEl=i,this.firebase=t,this.subscriptionsRef=this.firebase.child("subscriptions"),this.render(),this.ui(),this.bind()}return i.prototype.render=function(){return this.$rootEl.append("<section id='dash' style='display:none;'>\n  <p><span id='dash_email'></span> — <a id='dash_logout_btn' href='#'>logout</a></p>\n\n  <div id='subscriptions'>\n    <p>\n      <span id='subscriptions_empty'>You don't have any subscriptions just yet.<br/></span>\n      <form id='subscriptions_new_form'>\n        <input id='subscriptions_new_name' placeholder='name' />\n        <input id='subscriptions_new_url' placeholder='rss feed link' type='url' />\n        <input id='subscriptions_new_submit' value='Add' type='submit' />\n      </form>\n    </p>\n    <ul id='subscriptions_list' class='subscriptions-list'></ul>\n  </div>\n</section>")},i.prototype.renderSubscription=function(i){return new s(this.$list,i)},i.prototype.ui=function(){return this.$el=$("#dash"),this.$email=$("#dash_email"),this.$logoutBtn=$("#dash_logout_btn"),this.$newForm=$("#subscriptions_new_form"),this.$newUrl=$("#subscriptions_new_url"),this.$newName=$("#subscriptions_new_name"),this.$list=$("#subscriptions_list"),this.$empty=$("#subscriptions_empty"),this.$items=$(".subscriptions-remove-button")},i.prototype.open=function(){return this.$el.show()},i.prototype.close=function(){return this.$el.hide()},i.prototype.bind=function(){return this.subscriptionsRef.on("child_added",function(i){return function(t){return i.renderSubscription(t),i.$empty.hide()}}(this)),this.$logoutBtn.on("click",function(i){return app.authView.logout(),!1}),this.$newForm.on("submit",function(i){return function(t){return i.addNewSubscription(),!1}}(this))},i.prototype.setEmail=function(i){return this.$email.html(i)},i.prototype.addNewSubscription=function(){var i,t,n;return t=app.user.id,n=this.$newUrl.val(),this.$newUrl.val(""),i=this.$newName.val(),this.$newName.val(""),this.subscriptionsRef.push({user_id:t,url:n,name:i}),this.$newName.focus()},i}(),t=function(){function i(i,t,n){this.$rootEl=i,this.firebase=t,this.onAuthCb=n,this.render(),this.ui(),this.bind(),this.authenticate()}return i.prototype.render=function(){return this.$rootEl.append("<section id='auth' style='display:none;'>\n  <p>Welcome to <strong>RSS.rocks</strong>!</p>\n\n  <div id='signup' style='display:none;'>\n    <form id='signup_form'>\n      <input id='signup_email' value='' placeholder='email' type='email'>\n      <input id='signup_password' value='' placeholder='password' type='password'>\n      <input id='signup_submit' value='signup' type='submit'>\n      <span id='signup_loading' style='display:none;'>please wait...</span>\n    </form>\n    <p id='signup_error' class='error'></p>\n    <p>— if you have an account, please <a id='signup_login_btn' href='#'>login</a></p>\n  </div>\n\n  <div id='login'>\n    <form id='login_form'>\n      <input id='login_email' value='' placeholder='email' type='email'>\n      <input id='login_password' value='' placeholder='password' type='password'>\n      <input id='login_submit' value='login' type='submit'>\n      <span id='login_loading' style='display:none;'>please wait...</span>\n    </form>\n    <p id='login_error' class='error'></p>\n    <p>— if you don't have an account, please <a id='login_signup_btn' href='#'>signup</a><br>\n    — if you forgot your password, <a id='login_reset_password' href='#'>reset</a> it via an email</p>\n  </div>\n</section>")},i.prototype.ui=function(){return this.$el=$("#auth"),this.$loginBtn=$("#signup_login_btn"),this.$signupBtn=$("#login_signup_btn"),this.$loginView=$("#login"),this.$signupView=$("#signup"),this.$loginForm=$("#login_form"),this.$signupForm=$("#signup_form"),this.$loginEmail=$("#login_email"),this.$loginPass=$("#login_password"),this.$signupEmail=$("#signup_email"),this.$signupPass=$("#signup_password"),this.$loginError=$("#login_error"),this.$signupError=$("#signup_error"),this.$signupLoading=$("#signup_loading"),this.$loginLoading=$("#login_loading")},i.prototype.bind=function(){return this.$loginBtn.on("click",function(i){return function(t){return i.showLogin(),!1}}(this)),this.$signupBtn.on("click",function(i){return function(t){return i.showSignup(),!1}}(this)),this.$signupForm.on("submit",function(i){return function(t){return i.signup(),!1}}(this)),this.$loginForm.on("submit",function(i){return function(t){return i.login(),!1}}(this))},i.prototype.authenticate=function(){return this.auth=new FirebaseSimpleLogin(this.firebase,function(i){return function(t,n){return i.$loginLoading.hide(),n?"function"==typeof i.onAuthCb&&i.onAuthCb(n):app.show(i),t?i.error(t.message.replace("FirebaseSimpleLogin: ","")):void 0}}(this))},i.prototype.open=function(){return this.$signupError.html(""),this.$loginError.html(""),this.$el.show()},i.prototype.close=function(){return this.$el.hide()},i.prototype.showLogin=function(){return this.$loginView.show(),this.$signupView.hide(),this.$loginError.html("")},i.prototype.showSignup=function(){return this.$signupView.show(),this.$loginView.hide(),this.$signupError.html("")},i.prototype.login=function(){var i,t;return i=this.$loginEmail.val(),t=this.$loginPass.val(),this.$loginLoading.show(),this.auth.login("password",{email:i,password:t,rememberMe:!0})},i.prototype.logout=function(){return this.auth.logout(),this.showLogin(),app.show(this)},i.prototype.signup=function(){var i,t;return i=this.$signupEmail.val(),t=this.$signupPass.val(),this.$signupLoading.show(),this.auth.createUser(i,t,function(i){return function(t,n){return i.$signupLoading.hide(),t?i.error(t.message.replace("FirebaseSimpleLogin: ","")):"function"==typeof i.onAuthCb?i.onAuthCb(n):void 0}}(this))},i.prototype.error=function(i){return this.$signupError.html(i),this.$loginError.html(i)},i}(),i=function(){function i(i){this.firebaseAppName=i,this.firebase=new Firebase("https://"+this.firebaseAppName+".firebaseio.com"),this.ui(),this.render()}return i.prototype.ui=function(){return this.$el=$("#app")},i.prototype.render=function(){return this.dashView=new n(this.$el,this.firebase),this.authView=new t(this.$el,this.firebase,function(i){return function(t){return i.user=t,i.dashView.setEmail(i.user.email),i.show(i.dashView)}}(this))},i.prototype.show=function(i){var t;return null!=(t=this.currentView)&&t.close(),this.currentView=i,this.currentView.open()},i}(),$(function(){var t;return t="sizzling-fire-6443",window.app=new i(t)})}).call(this);
//# sourceMappingURL=./main.map